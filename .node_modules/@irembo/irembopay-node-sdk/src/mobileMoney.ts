import axios, { AxiosResponse, AxiosError, AxiosInstance } from "axios";

export class MobileMoney {
  protected axiosInstance: AxiosInstance;
  constructor(axiosInstance: AxiosInstance) {
    this.axiosInstance = axiosInstance;
  }

  async initiatePayment(data: MobileMoneyInterface): Promise<any> {
    try {
      const response: AxiosResponse = await this.axiosInstance.post("/transactions/initiate", data);
      return response.data;
    } catch (error: AxiosError | any) {
      return this.handleError(error);
    }
  }

  private handleError(error: any): void {
    // Check if error.response is defined before accessing it
    if (error.response) {
      throw error.response.data || error.response;
    } else {
      throw error;
    }
  }
}
